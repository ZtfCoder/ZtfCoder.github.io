import{_ as s,a as n,c as a,b as p}from"./app.8f294fc7.js";const l="/assets/image-20220914113730822.a80e33f3.png",e="/assets/image-20220914111829483.e2ddcd8e.png",o="/assets/image-20220914112115388.7b0a1ddb.png",r="/assets/image-20220914112219196.c5ff2f64.png",c="/assets/image-20220914112410642.f6ecf960.png",t="/assets/image-20220914112504082.7706d3ee.png",h=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u7B80\u4ECB","slug":"\u7B80\u4ECB","link":"#\u7B80\u4ECB","children":[]},{"level":2,"title":"\u5206\u5E03\u5F0F\u4ECB\u7ECD","slug":"\u5206\u5E03\u5F0F\u4ECB\u7ECD","link":"#\u5206\u5E03\u5F0F\u4ECB\u7ECD","children":[]},{"level":2,"title":"\u5355\u673A\u90E8\u7F72","slug":"\u5355\u673A\u90E8\u7F72","link":"#\u5355\u673A\u90E8\u7F72","children":[]},{"level":2,"title":"\u96C6\u7FA4\u90E8\u7F72","slug":"\u96C6\u7FA4\u90E8\u7F72","link":"#\u96C6\u7FA4\u90E8\u7F72","children":[]}],"relativePath":"main/minio/minio\u5B89\u88C5.md","lastUpdated":1672371241000}'),i={name:"main/minio/minio\u5B89\u88C5.md"},D=p(`<h2 id="\u7B80\u4ECB" tabindex="-1">\u7B80\u4ECB <a class="header-anchor" href="#\u7B80\u4ECB" aria-hidden="true">#</a></h2><p><code>minio</code> \u662F\u4E00\u6B3E\u9AD8\u6027\u80FD\u5206\u5E03\u5F0F\u6587\u4EF6\u5B58\u50A8\u8F6F\u4EF6</p><p>\u4E4B\u524D\u91C7\u7528\u7684<code>fastdfs</code> ,\u5B98\u65B9\u6574\u5408 docker,\u6781\u5176\u96BE\u7528,\u7B2C\u4E09\u65B9\u7684\u6574\u5408\u4E5F\u662F\u5F88\u591A\u5751\u70B9,\u800C<code>minio</code> \u5219\u5B98\u65B9 docker \u955C\u50CF,\u6784\u5EFA\u7B80\u5355,\u5E76\u4E14\u81EA\u5E26\u7684\u56FE\u5F62\u5316\u754C\u9762</p><h2 id="\u5206\u5E03\u5F0F\u4ECB\u7ECD" tabindex="-1">\u5206\u5E03\u5F0F\u4ECB\u7ECD <a class="header-anchor" href="#\u5206\u5E03\u5F0F\u4ECB\u7ECD" aria-hidden="true">#</a></h2><p>\u6240\u8C13\u5206\u5E03\u5F0F\u5B58\u50A8,\u5219\u662F\u4E0A\u4F20\u4E00\u5206\u6587\u4EF6,\u4F60\u53EF\u4EE5\u901A\u8FC7\u653E\u95EE\u4E0D\u540C\u670D\u52A1\u90FD\u53EF\u4EE5\u8BBF\u95EE\u5230\u8FD9\u4E2A\u6587\u4EF6,</p><p>\u4F7F\u7528\u7684\u662F<code>\u7EA0\u5220\u7801</code>,\u662F\u4E00\u79CD\u6062\u590D\u4E22\u5931\u548C\u635F\u574F\u6570\u636E\u7684\u6570\u5B66\u7B97\u6CD5\uFF0C Minio \u9ED8\u8BA4\u91C7\u7528 Reed-Solomon code \u5C06\u6570\u636E\u62C6\u5206\u6210 N/2 \u4E2A\u6570\u636E\u5757\u548C N/2 \u4E2A\u5947\u5076\u6821\u9A8C\u5757\u3002\u8FD9\u5C31\u610F\u5473\u7740\u5982\u679C\u662F 16 \u5757\u76D8\uFF0C\u4E00\u4E2A\u5BF9\u8C61\u4F1A\u88AB\u5206\u6210 8 \u4E2A\u6570\u636E\u5757\u30018 \u4E2A\u5947\u5076\u6821\u9A8C\u5757\uFF0C\u4F60\u53EF\u4EE5\u4E22\u5931\u4EFB\u610F 8 \u5757\u76D8\uFF08\u4E0D\u7BA1\u5176\u662F\u5B58\u653E\u7684\u6570\u636E\u5757\u8FD8\u662F\u6821\u9A8C\u5757\uFF09\uFF0C\u4F60\u4ECD\u53EF\u4EE5\u4ECE\u5269\u4E0B\u7684\u76D8\u4E2D\u7684\u6570\u636E\u8FDB\u884C\u6062\u590D\u3002</p><h2 id="\u5355\u673A\u90E8\u7F72" tabindex="-1">\u5355\u673A\u90E8\u7F72 <a class="header-anchor" href="#\u5355\u673A\u90E8\u7F72" aria-hidden="true">#</a></h2><div class="language-yaml line-numbers-mode"><button class="copy"></button><span class="lang">yaml</span><pre><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">minio</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">minio/minio</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">9000:9000</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">9001:9001</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">environment</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">MINIO_ACCESS_KEY</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">MINIO_SECRET_KEY</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">12345678</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/docker-compose/minio/data:/data</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/docker-compose/minio/config:/root/.minio</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">command</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">server --console-address &#39;:9001&#39; /data</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">privileged</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">restart</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">always</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">\u63D0\u793A</p><p>\u8D26\u53F7 <code>root</code> \u5BC6\u7801 <code>12345678</code></p><p>\u5176\u4E2D,9000 \u4E3A api \u8BBF\u95EE\u5730\u5740\u7AEF\u53E3</p><p>9001 \u4E3A\u56FE\u5F62\u5316\u754C\u9762\u7684\u8BBF\u95EE\u5730\u5740\u7AEF\u53E3</p></div><p><code>docker-compose up -d </code> \u8FD0\u884C\u5BB9\u5668</p><p>\u8BBF\u95EE <code>http://ip:9001</code></p><p>\u9996\u5148\u521B\u5EFA\u4E00\u4E2A\u6876,\u6240\u8C13\u6876,\u53EF\u4EE5\u7406\u89E3\u4E3A\u521B\u5EFA\u4E00\u4E2A\u7A7A\u95F4\u6216\u8005\u521B\u5EFA\u4E00\u5F20\u8868,\u8FD9\u6837\u7406\u89E3</p><p><img src="`+l+'" alt="image-20220914113730822"></p><p>\u7136\u540E \u9009\u62E9 <code>create bucket</code><img src="'+e+'" alt="image-20220914111829483"><img src="'+o+'" alt="image-20220914112115388"></p><p>\u4E0A\u4F20\u6210\u529F</p><p><img src="'+r+'" alt="image-20220914112219196"></p><p>\u521B\u5EFA\u6876\u540E,\u9ED8\u8BA4\u6876\u8BBF\u95EE\u6743\u9650\u662F\u79C1\u6709\u7684,\u65E0\u6CD5\u5355\u72EC\u8BBF\u95EE\u56FE\u7247,\u9700\u8981\u5230\u6876\u8BBE\u7F6E\u91CC\u6539\u4E3A <code>public</code></p><p><img src="'+c+'" alt="image-20220914112410642"></p><p>\u9996\u5148\u56DE\u5230\u6876\u754C\u9762,</p><p>\u9009\u62E9 <code>manage</code></p><p><img src="'+t+`" alt="image-20220914112504082"></p><p>\u70B9\u51FB\u4FEE\u6539\u6309\u94AE,\u4FEE\u6539\u4E3A <code>public</code></p><p>\u63A5\u7740\u8BBF\u95EE <code>http://ip:9000/\u6876\u540D\u79F0/\u6587\u4EF6\u540D\u79F0</code> \u5C31\u53EF\u4EE5\u8BBF\u95EE\u5230\u521A\u624D\u4E0A\u4F20\u7684\u56FE\u7247</p><p>\u6211\u4EEC\u53EF\u4EE5\u53BB\u6570\u636E\u5B58\u50A8\u76EE\u5F55\u53EF\u4EE5\u770B\u7684\u6211\u4EEC\u5B58\u50A8\u7684\u56FE\u7247\u5DF2\u7ECF\u5B58\u5728\u4E8E\u6211\u4EEC\u8BBE\u7F6E\u7684\u6570\u636E\u5B58\u50A8\u76EE\u5F55\u91CC\u4E86</p><h2 id="\u96C6\u7FA4\u90E8\u7F72" tabindex="-1">\u96C6\u7FA4\u90E8\u7F72 <a class="header-anchor" href="#\u96C6\u7FA4\u90E8\u7F72" aria-hidden="true">#</a></h2><p>\u5B98\u65B9 <code>docker-compose.yaml</code> \u6587\u4EF6\u6709\u70B9\u95EE\u9898,\u7A0D\u5FAE\u4FEE\u6539\u5F97\u5230\u4E00\u4E0B\u6B63\u786E\u6587\u4EF6</p><div class="language-yaml line-numbers-mode"><button class="copy"></button><span class="lang">yaml</span><pre><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3.7</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u6240\u6709\u5BB9\u5668\u901A\u7528\u7684\u8BBE\u7F6E\u548C\u914D\u7F6E</span></span>
<span class="line"><span style="color:#F07178;">x-minio-common</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#FFCB6B;">minio-common</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">minio/minio</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">command</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">server --console-address &quot;:9001&quot; http://minio{1...4}/data</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">expose</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">9000</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;"># environment:</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;"># MINIO_ROOT_USER: minioadmin</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;"># MINIO_ROOT_PASSWORD: minioadmin</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">healthcheck</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">CMD</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">curl</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">-f</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://localhost:9000/minio/health/live</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">interval</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">30s</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">timeout</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">20s</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">retries</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u542F\u52A84\u4E2Adocker\u5BB9\u5668\u8FD0\u884Cminio\u670D\u52A1\u5668\u5B9E\u4F8B</span></span>
<span class="line"><span style="color:#676E95;"># \u4F7F\u7528nginx\u53CD\u5411\u4EE3\u74069000\u7AEF\u53E3\uFF0C\u8D1F\u8F7D\u5747\u8861, \u4F60\u53EF\u4EE5\u901A\u8FC79001\u30019002\u30019003\u30019004\u7AEF\u53E3\u8BBF\u95EE\u5B83\u4EEC\u7684web console</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">minio1</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;&lt;:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">minio-common</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">hostname</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">minio1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">9001:9001</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./data/data1:/data</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">minio2</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;&lt;:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">minio-common</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">hostname</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">minio2</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">9002:9001</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./data/data2:/data</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">minio3</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;&lt;:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">minio-common</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">hostname</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">minio3</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">9003:9001</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./data/data3:/data</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">minio4</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;&lt;:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">minio-common</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">hostname</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">minio4</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">9004:9001</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./data/data4:/data</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">nginx</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">hostname</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./nginx.conf:/etc/nginx/nginx.conf:ro</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">9000:9000</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">depends_on</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">minio1</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">minio2</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">minio3</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">minio4</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br></div></div><p><code>nginx.conf</code> \u6587\u4EF6\u5185\u5BB9</p><div class="language- line-numbers-mode"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">user  nginx;</span></span>
<span class="line"><span style="color:#A6ACCD;">worker_processes  auto;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">error_log  /var/log/nginx/error.log warn;</span></span>
<span class="line"><span style="color:#A6ACCD;">pid        /var/run/nginx.pid;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">events {</span></span>
<span class="line"><span style="color:#A6ACCD;">    worker_connections  4096;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">http {</span></span>
<span class="line"><span style="color:#A6ACCD;">    include       /etc/nginx/mime.types;</span></span>
<span class="line"><span style="color:#A6ACCD;">    default_type  application/octet-stream;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    access_log  /var/log/nginx/access.log  main;</span></span>
<span class="line"><span style="color:#A6ACCD;">    sendfile        on;</span></span>
<span class="line"><span style="color:#A6ACCD;">    keepalive_timeout  65;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    # include /etc/nginx/conf.d/*.conf;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    upstream minio {</span></span>
<span class="line"><span style="color:#A6ACCD;">        server minio1:9000;</span></span>
<span class="line"><span style="color:#A6ACCD;">        server minio2:9000;</span></span>
<span class="line"><span style="color:#A6ACCD;">        server minio3:9000;</span></span>
<span class="line"><span style="color:#A6ACCD;">        server minio4:9000;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    server {</span></span>
<span class="line"><span style="color:#A6ACCD;">        listen       9000;</span></span>
<span class="line"><span style="color:#A6ACCD;">        listen  [::]:9000;</span></span>
<span class="line"><span style="color:#A6ACCD;">        server_name  localhost;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">        # To allow special characters in headers</span></span>
<span class="line"><span style="color:#A6ACCD;">        ignore_invalid_headers off;</span></span>
<span class="line"><span style="color:#A6ACCD;">        # Allow any size file to be uploaded.</span></span>
<span class="line"><span style="color:#A6ACCD;">        # Set to a value such as 1000m; to restrict file size to a specific value</span></span>
<span class="line"><span style="color:#A6ACCD;">        client_max_body_size 0;</span></span>
<span class="line"><span style="color:#A6ACCD;">        # To disable buffering</span></span>
<span class="line"><span style="color:#A6ACCD;">        proxy_buffering off;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">        location / {</span></span>
<span class="line"><span style="color:#A6ACCD;">            proxy_set_header Host $http_host;</span></span>
<span class="line"><span style="color:#A6ACCD;">            proxy_set_header X-Real-IP $remote_addr;</span></span>
<span class="line"><span style="color:#A6ACCD;">            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span style="color:#A6ACCD;">            proxy_set_header X-Forwarded-Proto $scheme;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">            proxy_connect_timeout 300;</span></span>
<span class="line"><span style="color:#A6ACCD;">            # Default is HTTP/1, keepalive is only enabled in HTTP/1.1</span></span>
<span class="line"><span style="color:#A6ACCD;">            proxy_http_version 1.1;</span></span>
<span class="line"><span style="color:#A6ACCD;">            proxy_set_header Connection &quot;&quot;;</span></span>
<span class="line"><span style="color:#A6ACCD;">            chunked_transfer_encoding off;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">            proxy_pass http://minio;</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><p><code>docker-compose up -d </code> \u8FD0\u884C\u5BB9\u5668</p><p>\u63A5\u4E0B\u6765\u8BBF\u95EE <code>http://ip:9001</code> \u5176\u4E2D 9001-9004 \u90FD\u53EF\u4EE5\u8BBF\u95EE</p><p>\u9ED8\u8BA4\u767B\u5F55\u5BC6\u7801\u4E3A <code>minioadmin</code></p><p>\u6211\u4EEC\u53EF\u4EE5\u5C1D\u8BD5\u4E0A\u4F20\u4E00\u5F20\u56FE\u7247,\u63A5\u7740\u505C\u6B62\u5176\u4E2D 1 \u53F7<code>minio</code></p><p>docker-compose stop <code>minio1\u53F7\u540D\u79F0</code></p><p>\u518D\u6B21\u8BBF\u95EE\u56FE\u7247,\u53EF\u4EE5\u53D1\u73B0,\u7B49\u4F1A\u4E00\u4F1A\u540E,\u4ECD\u7136\u80FD\u8BBF\u95EE\u8FD9\u5F20\u56FE\u7247,\u8FD9\u6837 \u5C31\u5177\u5907\u5BB9\u707E\u80FD\u529B</p>`,35),C=[D];function y(A,b,m,F,u,d){return n(),a("div",null,C)}const g=s(i,[["render",y]]);export{h as __pageData,g as default};
