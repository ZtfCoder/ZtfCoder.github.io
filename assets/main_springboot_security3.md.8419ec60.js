import{_ as s,a,c as n,b as e}from"./app.ee35aad8.js";const y=JSON.parse('{"title":"springboot\u57FA\u7840\u5165\u95E8-security \u57FA\u4E8E\u6CE8\u89E3\u63A7\u5236\u6743\u9650","description":"","frontmatter":{"title":"springboot\u57FA\u7840\u5165\u95E8-security \u57FA\u4E8E\u6CE8\u89E3\u63A7\u5236\u6743\u9650","tags":["java","springboot","\u5B89\u5168\u6846\u67B6"],"categories":"springboot","abbrlink":"f1edfd7f"},"headers":[{"level":2,"title":"\u5F00\u542F\u6CE8\u89E3\u6A21\u5F0F","slug":"\u5F00\u542F\u6CE8\u89E3\u6A21\u5F0F","link":"#\u5F00\u542F\u6CE8\u89E3\u6A21\u5F0F","children":[{"level":3,"title":"jsr250Enabled","slug":"jsr250enabled","link":"#jsr250enabled","children":[]},{"level":3,"title":"securedEnabled","slug":"securedenabled","link":"#securedenabled","children":[]},{"level":3,"title":"prePostEnabled","slug":"prepostenabled","link":"#prepostenabled","children":[]}]}],"relativePath":"main/springboot/security3.md","lastUpdated":1681882908000}'),l={name:"main/springboot/security3.md"},p=e(`<h1 id="\u6CE8\u89E3\u63A7\u5236" tabindex="-1">\u6CE8\u89E3\u63A7\u5236 <a class="header-anchor" href="#\u6CE8\u89E3\u63A7\u5236" aria-hidden="true">#</a></h1><p>\u5728\u524D\u4E00\u7BC7\u7B14\u8BB0\u4E2D,\u6211\u4EEC\u901A\u8FC7ajax\u767B\u5F55,\u548C\u8FDB\u884C\u8BFB\u53D6\u6570\u636E\u5E93\u8FDB\u884C\u6743\u9650\u5224\u65AD,\u4F46\u662F,\u6211\u4EEC\u7684\u5224\u65AD\u8BF7\u6C42\u62E5\u6709\u54EA\u4E9B\u89D2\u8272\u53EF\u4EE5\u8BBF\u95EE\u65F6,</p><p>\u6211\u4EEC\u5199\u5728\u914D\u7F6E\u8BF7\u6C42\u4E2D,\u8FD9\u6837,\u4E0D\u65B9\u4FBF\u6211\u4EEC\u64CD\u4F5C</p><p>springboot \u63D0\u5021\u4F7F\u7528\u76F4\u63A5\u5F00\u53D1</p><p>\u6240\u4EE5,\u80AF\u5B9A\u4E5F\u6709\u6CE8\u89E3\u6A21\u5F0F</p><h2 id="\u5F00\u542F\u6CE8\u89E3\u6A21\u5F0F" tabindex="-1">\u5F00\u542F\u6CE8\u89E3\u6A21\u5F0F <a class="header-anchor" href="#\u5F00\u542F\u6CE8\u89E3\u6A21\u5F0F" aria-hidden="true">#</a></h2><p>\u5728<code>SecurityConfig</code> \u6211\u4EEC\u7684\u914D\u7F6E\u7C7B\u4E0A\u52A0\u4E0A\u4E0B\u9762\u8FD9\u6837\u7684\u6CE8\u89E3</p><blockquote><p>@EnableGlobalMethodSecurity(prePostEnabled = true,securedEnabled=true,jsr250Enabled=true)</p></blockquote><p><strong>\u8FD9\u6837\u4F1A\u5F00\u542F3\u79CD\u6CE8\u89E3\u6A21\u5F0F,</strong></p><h3 id="jsr250enabled" tabindex="-1">jsr250Enabled <a class="header-anchor" href="#jsr250enabled" aria-hidden="true">#</a></h3><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">DenyAll</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u62D2\u7EDD\u8BBF\u95EE</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">PermitAll</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">//\u540C\u610F\u8BBF\u95EE</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RolesAllowed</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u62E5\u6709\u67D0\u4E00\u4E2A\u89D2\u8272\u5C31\u53EF\u4EE5\u8BBF\u95EE</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u6BD4\u5982 \u8BBF\u95EE\u4E0B\u65B9\u7684\u8BF7\u6C42,\u53EA\u6709\u62E5\u6709<code>admin</code> <strong>\u6216\u8005</strong><code>root</code> \u89D2\u8272\u6743\u9650\u65F6,\u624D\u80FD\u8BBF\u95EE</p><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RolesAllowed</span><span style="color:#89DDFF;">({</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">admin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">root</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">})</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RequestMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/getAllUser</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">index</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">getAllUser</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="securedenabled" tabindex="-1">securedEnabled <a class="header-anchor" href="#securedenabled" aria-hidden="true">#</a></h3><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Secured</span><span style="color:#89DDFF;">({</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ROLE_user</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ROLE_admin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>\u53EA\u6709\u62E5\u6709\u4E0A\u9762\u663E\u793A\u7684<strong>\u5168\u90E8</strong>\u89D2\u8272\u65F6,\u624D\u80FD\u8BBF\u95EE,\u5426\u5219\u65E0\u6CD5\u8BBF\u95EE</p><p>\u5E76\u4E14\u8FD9\u91CC\u7684\u89D2\u8272\u540D\u9700\u8981\u6DFB\u52A0<code>ROLE_</code> \u524D\u7F00,\u800C<code>jsr250Enabled</code> \u6A21\u5F0F,\u4E0D\u9700\u8981\u6DFB\u52A0\u524D\u7F00</p><h3 id="prepostenabled" tabindex="-1">prePostEnabled <a class="header-anchor" href="#prepostenabled" aria-hidden="true">#</a></h3><p>\u8FD9\u79CD\u6A21\u5F0F,\u6BD4\u8F83\u5F3A\u5927,\u652F\u6301springEL \u8868\u8FBE\u5F0F,\u8FD8\u53EF\u4EE5\u8FDB\u884C\u4E00\u4E9B\u903B\u8F91\u5224\u65AD</p><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">PreAuthorize</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">#userId == authentication.principal.userId or hasAuthority(\u2018ADMIN\u2019)</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><em>\u8FD9\u91CC\u8868\u793A\u5728changePassword\u65B9\u6CD5\u6267\u884C\u4E4B\u524D\uFF0C\u5224\u65AD\u65B9\u6CD5\u53C2\u6570userId\u7684\u503C\u662F\u5426\u7B49\u4E8Eprincipal\u4E2D\u4FDD\u5B58\u7684\u5F53\u524D\u7528\u6237\u7684userId\uFF0C</em></p><p><em>\u6216\u8005\u5F53\u524D\u7528\u6237\u662F\u5426\u5177\u6709ROLE_ADMIN\u6743\u9650\uFF0C\u4E24\u79CD\u7B26\u5408\u5176\u4E00\uFF0C\u5C31\u53EF\u4EE5\u8BBF\u95EE\u8BE5 \u65B9\u6CD5\u3002</em></p>`,22),o=[p];function r(t,c,i,d,D,u){return a(),n("div",null,o)}const F=s(l,[["render",r]]);export{y as __pageData,F as default};
