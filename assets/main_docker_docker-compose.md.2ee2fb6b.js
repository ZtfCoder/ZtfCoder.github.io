import{_ as s,o as n,c as a,Q as p}from"./chunks/framework.1baa841b.js";const u=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"main/docker/docker-compose.md","filePath":"main/docker/docker-compose.md","lastUpdated":1713749248000}'),l={name:"main/docker/docker-compose.md"},e=p(`<p>安装地址</p><p><a href="https://github.com/docker/compose/releases" target="_blank" rel="noreferrer">Releases · docker/compose (github.com)</a></p><p>下载后,移动到 <code>/user/loacl/bin</code></p><p>修改名称为 <code>docker-compose</code></p><p>目录下,并且给与 权限</p><p><code>chmod 777 文件名</code></p><p>如何使用</p><p>es 实战</p><p>创建一个文件为 <code>docker-compose.yml</code></p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;3&#39;</span></span>
<span class="line"><span style="color:#85E89D;">services</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">elasticsearch</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">elasticsearch:7.7.0</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#镜像</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">container_name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">elk_elasticsearch</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#定义容器名称</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">restart</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">always</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#开机启动，失败也会一直重启</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">environment</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">&quot;cluster.name=elasticsearch&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#设置集群名称为elasticsearch</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">&quot;discovery.type=single-node&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#以单一节点模式启动</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">&quot;ES_JAVA_OPTS=-Xms256m -Xmx256m&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#设置使用jvm内存大小</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">volumes</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">./plugins:/usr/share/elasticsearch/plugins</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#插件文件挂载</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">./data:/usr/share/elasticsearch/data</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#数据文件挂载</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">ports</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">9200:9200</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">9300:9300</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">version</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;3&#39;</span></span>
<span class="line"><span style="color:#22863A;">services</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">elasticsearch</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">elasticsearch:7.7.0</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#镜像</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">container_name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">elk_elasticsearch</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#定义容器名称</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">restart</span><span style="color:#24292E;">: </span><span style="color:#032F62;">always</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#开机启动，失败也会一直重启</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">environment</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">&quot;cluster.name=elasticsearch&quot;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#设置集群名称为elasticsearch</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">&quot;discovery.type=single-node&quot;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#以单一节点模式启动</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">&quot;ES_JAVA_OPTS=-Xms256m -Xmx256m&quot;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#设置使用jvm内存大小</span></span>
<span class="line"><span style="color:#24292E;">      </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">volumes</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">./plugins:/usr/share/elasticsearch/plugins</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#插件文件挂载</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">./data:/usr/share/elasticsearch/data</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#数据文件挂载</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">ports</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">9200:9200</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">9300:9300</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>之后,给所用到的文件赋予权限 ,否则无法访问这些文件</p><p>在当前目录下执行 容器 <code>docker-compose up -d</code> 既可以启动容器</p><p>相关命令</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;"># 1. 基于docker-compose.yml启动管理的容器</span></span>
<span class="line"><span style="color:#e1e4e8;">docker-compose up -d</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;"># 2. 关闭并删除容器</span></span>
<span class="line"><span style="color:#e1e4e8;">docker-compose down</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;"># 3. 开启|关闭|重启已经存在的由docker-compose维护的容器</span></span>
<span class="line"><span style="color:#e1e4e8;">docker-compose start|stop|restart</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;"># 4. 查看由docker-compose管理的容器</span></span>
<span class="line"><span style="color:#e1e4e8;">docker-compose ps</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;"># 5. 查看日志</span></span>
<span class="line"><span style="color:#e1e4e8;">docker-compose logs -f</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;"># 1. 基于docker-compose.yml启动管理的容器</span></span>
<span class="line"><span style="color:#24292e;">docker-compose up -d</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;"># 2. 关闭并删除容器</span></span>
<span class="line"><span style="color:#24292e;">docker-compose down</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;"># 3. 开启|关闭|重启已经存在的由docker-compose维护的容器</span></span>
<span class="line"><span style="color:#24292e;">docker-compose start|stop|restart</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;"># 4. 查看由docker-compose管理的容器</span></span>
<span class="line"><span style="color:#24292e;">docker-compose ps</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;"># 5. 查看日志</span></span>
<span class="line"><span style="color:#24292e;">docker-compose logs -f</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;3&#39;</span></span>
<span class="line"><span style="color:#85E89D;">services</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">redis</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">redis</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">container_name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">redis_container</span><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">restart</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">always</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">ports</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">6379:6379</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">version</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;3&#39;</span></span>
<span class="line"><span style="color:#22863A;">services</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">redis</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">redis</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">container_name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">redis_container</span><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">restart</span><span style="color:#24292E;">: </span><span style="color:#032F62;">always</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">ports</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">6379:6379</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">docker run \\</span></span>
<span class="line"><span style="color:#e1e4e8;">  --rm influxdb:2.1.1 \\</span></span>
<span class="line"><span style="color:#e1e4e8;">  influxd print-config &gt; config.yml</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">docker run \\</span></span>
<span class="line"><span style="color:#24292e;">  --rm influxdb:2.1.1 \\</span></span>
<span class="line"><span style="color:#24292e;">  influxd print-config &gt; config.yml</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>`,16),o=[e];function c(r,t,i,y,E,d){return n(),a("div",null,o)}const b=s(l,[["render",c]]);export{u as __pageData,b as default};
